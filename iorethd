#!/usr/bin/env python3
import sys
import logging

logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)-15s %(levelname)s: %(funcName)s %(message)s"
)
logger = logging.getLogger(__name__)

from ioreth.bot import ReplyBot

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: %s <config-file.conf>" % sys.argv[0])
        exit(1)


    b = ReplyBot(sys.argv[1])
    #b._aprs.start()  # this starts APRS-IS thread from inside the bot
    b.connect()
#    b._aprs.send_aprs_msg("<callsign>", "manual test")
    try:
        b.loop()
    except Exception as e:
        logger.exception("Fatal error in bot loop:")
